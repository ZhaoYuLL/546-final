<h1>Wardrobe</h1>

<nav>
  <ul>
    <li><a href="./wardrobe">Wardrobe</a></li>
    <li><a href="./closet">Closet</a></li>
    <li><a href="./favorites">Favorites</a></li>
  </ul>
</nav>

<div class="wardrobe-preview">
  <div class="preview-content">
    <p>Head: <span id="preview-head"></span></p>
    <button class="prev-button" data-part="head">Previous Head</button>
    <button class="next-button" data-part="head">Next Head</button>

    <p>Body: <span id="preview-body"></span></p>
    <button class="prev-button" data-part="body">Previous Body</button>
    <button class="next-button" data-part="body">Next Body</button>

    <p>Legs: <span id="preview-legs"></span></p>
    <button class="prev-button" data-part="legs">Previous Legs</button>
    <button class="next-button" data-part="legs">Next Legs</button>

    <p>Feet: <span id="preview-feet"></span></p>
    <button class="prev-button" data-part="feet">Previous Feet</button>
    <button class="next-button" data-part="feet">Next Feet</button>
  </div>
</div>

<div class="wardrobes">
  {{#each wardrobes}}
  <div class="wardrobe">
    <h2>{{caption}}</h2>
    <h2>{{outfit}}</h2>
    <div class="fitposts">
      {{#each fitposts}}
      <div class="fitpost">
        <h1>this is fitpost {{addOne @index}}</h1>
        <p>headwear</p>
        <img
          src="{{this.headUrl}}"
          width="200px;"
          height="200px"
          alt="head Image"
        />
        <p>bodywear:</p>
        <img
          src="{{this.bodyUrl}}"
          width="200px;"
          height="200px"
          alt="head Image"
        />
        <p>legwear:</p>
        <img
          src="{{this.legUrl}}"
          width="200px;"
          height="200px"
          alt="head Image"
        />
        <p>footwear:</p>
        <img
          src="{{this.footUrl}}"
          width="200px;"
          height="200px"
          alt="head Image"
        />
        <p>likes: {{likes}}</p>
        <p>saves: {{saves}}</p>
        <p>example of an image working inside fitpost</p>
        <img
          src="{{this.imageUrl}}"
          width="200px;"
          height="200px"
          alt="Fitpost Image"
        />
        <p>Posted Date: {{postedDate}}</p>
      </div>
      {{/each}}
    </div>
  </div>
  {{/each}}
</div>

<script>
  const wardrobes = {{{wardrobes}}};
  let currentIndexes = {
    head: 0,
    body: 0,
    legs: 0,
    feet: 0
  };

  function updatePreview() {
    const wardrobe = wardrobes[0];
    const fitpost = wardrobe.fitposts[0];

    document.getElementById('preview-head').textContent = fitpost.headUrl;
    document.getElementById('preview-body').textContent = fitpost.bodyUrl;
    document.getElementById('preview-legs').textContent = fitpost.legUrl;
    document.getElementById('preview-feet').textContent = fitpost.footUrl;
  }

  function handleClick(event) {
    const part = event.target.getAttribute('data-part');
    const fitposts = wardrobes[0].fitposts;

    if (event.target.classList.contains('prev-button')) {
      currentIndexes[part] = (currentIndexes[part] - 1 + fitposts.length) % fitposts.length;
    } else if (event.target.classList.contains('next-button')) {
      currentIndexes[part] = (currentIndexes[part] + 1) % fitposts.length;
    }

    const fitpost = fitposts[currentIndexes[part]];
    document.getElementById(`preview-${part}`).textContent = fitpost[`${part}Url`];
  }

  document.querySelectorAll('.prev-button, .next-button').forEach(button => {
    button.addEventListener('click', handleClick);
  });

  updatePreview();
</script>
